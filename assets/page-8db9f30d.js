import{d as D,g as F,w as T,o as l,c as m,F as _,r as b,h as u,a as p,i as f,v as d,b as E,u as V,f as A,t as L,n as O,j as x,k as B,l as N,m as S,p as i}from"./index-a34ce813.js";import{_ as P}from"./Button.vue_vue_type_script_setup_true_lang-0789439f.js";const M=(g,e)=>{const r=g[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((v,c)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(c.bind(null,new Error("Unknown variable dynamic import: "+e)))})},$={class:"mb-5"},j={class:"text-3xl font-bold before:block before:absolute before:w-2 before:h-10 before:left-0 before:bg-cyan-500"},q={class:"w-full flex justify-center"},U=D({__name:"page",setup(g){const e=V(),r=A(),v=N(),c=e.state.pages,k=o=>S(()=>M(Object.assign({"../components/Button.vue":()=>i(()=>import("./Button-bc4b3730.js"),["assets/Button-bc4b3730.js","assets/Button.vue_vue_type_script_setup_true_lang-0789439f.js","assets/index-a34ce813.js","assets/index-2a53af05.css"]),"../components/Footer.vue":()=>i(()=>import("./Footer-87702227.js"),["assets/Footer-87702227.js","assets/index-a34ce813.js","assets/index-2a53af05.css"]),"../components/FormCheck.vue":()=>i(()=>import("./FormCheck-91ec2510.js"),["assets/FormCheck-91ec2510.js","assets/index-a34ce813.js","assets/index-2a53af05.css"]),"../components/FormControl.vue":()=>i(()=>import("./FormControl-e0b49707.js"),["assets/FormControl-e0b49707.js","assets/index-a34ce813.js","assets/index-2a53af05.css"]),"../components/FormFivestar.vue":()=>i(()=>import("./FormFivestar-0d9779a1.js"),["assets/FormFivestar-0d9779a1.js","assets/index-a34ce813.js","assets/index-2a53af05.css"]),"../components/FormInfo.vue":()=>i(()=>import("./FormInfo-e979bfb5.js"),["assets/FormInfo-e979bfb5.js","assets/index-a34ce813.js","assets/index-2a53af05.css"]),"../components/FormSelect.vue":()=>i(()=>import("./FormSelect-75141a2d.js"),["assets/FormSelect-75141a2d.js","assets/index-a34ce813.js","assets/index-2a53af05.css","assets/FormSelect-8f89c724.css"])}),`../components/${o}.vue`));let h=!1;const R=(o,t,n,a)=>{},y=(o,t)=>{o.length<=0||c[t].blocks.forEach(n=>{o.forEach(a=>{n.id===a.id&&(n.hide=a.hide)})})};F(()=>{h=!0;let o=r.currentRoute.value.params.id;e.state.pageNum=parseInt(o.toString())}),T(()=>v.path,o=>{if(!r.currentRoute.value.params.id)return;let t=r.currentRoute.value.params.id;e.state.pageNum=parseInt(t.toString())});function w(){e.commit("pushPage",{router:r,num:1,force:!0})}const C=()=>{let o=e.state.pages.map(s=>s.blocks),t=[].concat.apply([],o),n=t.filter(s=>s.hide===!1).length,a=t.filter(s=>s.hide===!1&&s.completed===!0).length;e.state.progress=(a/n*100).toFixed(1)};return(o,t)=>(l(),m(_,null,[(l(!0),m(_,null,b(u(c),(n,a)=>f((l(),m("div",null,[p("form",$,[p("h2",j,L(n.title),1),(l(!0),m(_,null,b(n.blocks,s=>(l(),m("div",{class:O(["my-4 question",{"form-hide need-toggle-hide":s.hide}]),ref_for:!0,ref:I=>R(I,a,s.id)},[(l(),x(B(k(s.component)),{block:s,index:a,onToggleChildren:y,onCountProgress:C},null,40,["block","index"]))],2))),256))])],512)),[[d,u(e).state.pageNum==a+1]])),256)),p("div",q,[f(E(P,{msg:"下一頁",class:"",onClick:t[0]||(t[0]=n=>u(e).commit("pushPage",{router:u(r),num:1}))},null,512),[[d,u(e).state.pageNum<u(e).state.pages.length]]),f(E(P,{msg:"送出",class:"w-60",onClick:t[1]||(t[1]=n=>w())},null,512),[[d,u(e).state.pageNum>=u(e).state.pages.length]])])],64))}});export{U as default};
