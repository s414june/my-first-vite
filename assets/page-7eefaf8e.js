import{d as F,i as V,j as A,c as E,w as b,T as L,u as O,f as x,o as l,g as _,k as P,l as c,v as p,m as u,b as f,a as d,t as B,F as k,n as N,p as S,h as $,q,s as i}from"./index-4bf7cdec.js";import{_ as R}from"./Button.vue_vue_type_script_setup_true_lang-9182d883.js";import{_ as M}from"./Card.vue_vue_type_script_setup_true_lang-714543c3.js";const j=(g,e)=>{const r=g[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((v,m)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(m.bind(null,new Error("Unknown variable dynamic import: "+e)))})},z={class:"mb-5"},G={class:"text-3xl font-bold before:block before:absolute before:w-2 before:h-10 before:left-0 before:bg-cyan-500"},H={class:"w-full flex justify-center"},Q=F({__name:"page",setup(g){const e=O(),r=x(),v=$(),m=e.state.pages,y=s=>q(()=>j(Object.assign({"../components/Button.vue":()=>i(()=>import("./Button-6da5fca2.js"),["assets/Button-6da5fca2.js","assets/Button.vue_vue_type_script_setup_true_lang-9182d883.js","assets/index-4bf7cdec.js","assets/index-7e7b7d0c.css"]),"../components/Card.vue":()=>i(()=>import("./Card-70796bfd.js"),["assets/Card-70796bfd.js","assets/Card.vue_vue_type_script_setup_true_lang-714543c3.js","assets/index-4bf7cdec.js","assets/index-7e7b7d0c.css"]),"../components/Footer.vue":()=>i(()=>import("./Footer-676929b6.js"),["assets/Footer-676929b6.js","assets/index-4bf7cdec.js","assets/index-7e7b7d0c.css"]),"../components/FormCheck.vue":()=>i(()=>import("./FormCheck-bf23332b.js"),["assets/FormCheck-bf23332b.js","assets/index-4bf7cdec.js","assets/index-7e7b7d0c.css"]),"../components/FormControl.vue":()=>i(()=>import("./FormControl-1389e262.js"),["assets/FormControl-1389e262.js","assets/index-4bf7cdec.js","assets/index-7e7b7d0c.css"]),"../components/FormFivestar.vue":()=>i(()=>import("./FormFivestar-b0991d0d.js"),["assets/FormFivestar-b0991d0d.js","assets/index-4bf7cdec.js","assets/index-7e7b7d0c.css"]),"../components/FormInfo.vue":()=>i(()=>import("./FormInfo-1a54c657.js"),["assets/FormInfo-1a54c657.js","assets/index-4bf7cdec.js","assets/index-7e7b7d0c.css"]),"../components/FormSelect.vue":()=>i(()=>import("./FormSelect-fd3f789d.js"),["assets/FormSelect-fd3f789d.js","assets/index-4bf7cdec.js","assets/index-7e7b7d0c.css","assets/FormSelect-8f89c724.css"])}),`../components/${s}.vue`));let h=!1;const C=(s,o,a,n)=>{},w=(s,o)=>{s.length<=0||m[o].blocks.forEach(a=>{s.forEach(n=>{a.id===n.id&&(a.hide=n.hide)})})};V(()=>{h=!0;let s=r.currentRoute.value.params.id;e.state.pageNum=parseInt(s.toString())}),A(()=>v.path,s=>{if(!r.currentRoute.value.params.id)return;let o=r.currentRoute.value.params.id;e.state.pageNum=parseInt(o.toString())});function I(){e.commit("pushPage",{router:r,num:1,force:!0})}const D=()=>{let s=e.state.pages.map(t=>t.blocks),o=[].concat.apply([],s),a=o.filter(t=>t.hide===!1).length,n=o.filter(t=>t.hide===!1&&t.completed===!0).length;e.state.progress=(n/a*100).toFixed(1)};return(s,o)=>(l(),E(L,null,{default:b(()=>[(l(!0),_(k,null,P(u(m),(a,n)=>c((l(),_("div",{key:n},[f(M,null,{default:b(()=>[d("form",z,[d("h2",G,B(a.title),1),(l(!0),_(k,null,P(a.blocks,t=>(l(),_("div",{class:N(["my-4 question",{"form-hide need-toggle-hide":t.hide}]),ref_for:!0,ref:T=>C(T,n,t.id,"")},[(l(),E(S(y(t.component)),{block:t,index:n,onToggleChildren:w,onCountProgress:D},null,40,["block","index"]))],2))),256))]),d("div",H,[c(f(R,{msg:"下一頁",class:"",onClick:o[0]||(o[0]=t=>u(e).commit("pushPage",{router:u(r),num:1}))},null,512),[[p,u(e).state.pageNum<u(e).state.pages.length]]),c(f(R,{msg:"送出",class:"w-60",onClick:o[1]||(o[1]=t=>I())},null,512),[[p,u(e).state.pageNum>=u(e).state.pages.length]])])]),_:2},1024)])),[[p,u(e).state.pageNum==n+1]])),128))]),_:1}))}});export{Q as default};
